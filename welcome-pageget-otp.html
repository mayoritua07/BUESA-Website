<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>Welcome Page(Get OTP)</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Poppins%3A400%2C600"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C600%2C700%2C800"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat%3A400%2C700%2C800"
    />
    <link rel="stylesheet" href="./styles/welcome-pageget-otp.css" />
    <script
      src="https://kit.fontawesome.com/63ccf9df6a.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="upper-div">
      <div class="upper-content">
        <!-- <button class="back-button">
          <img class="back-arrow" src="./assets/vector-idJ.png" />
        </button> -->
        <div class="header">
          <span>BUESA Polls <span class="header-sub"> 2024</span> </span>
        </div>
      </div>
      <div class="line"></div>
    </div>
    <div class="main-div">
      <img class="buesa-logo" src="./assets/BUESA Logo.png" />
      <div class="sub-div">
        <p class="title">Welcome</p>
        <p class="sub-title">
          to 2024
          <span class="buesa-bold"> BUESA </span>
          Elections
        </p>
      </div>
      <div class="input-box">
        <!-- <img class="input-img" src="./assets/tabler-numbers.png" /> -->
        <img
          width="30"
          height="30"
          class="matric-img"
          src="https://img.icons8.com/ios-glyphs/30/123.png"
          alt="123"
        />
        <input
          type="text"
          id="matric-input"
          placeholder="Matric Number"
          name="Matric-number"
          class="input-label"
          maxlength="10"
        />
      </div>
      <!-- <div id="otp-input" class="input-box">
        <img class="input-img" src="./assets/teenyicons-otp-solid.png" />
        <input
          type="number"
          inputmode="numeric"
          oninput="javascript: if(this.value.length > this.maxLength) this.value = this.value.slice(0,this.maxLength);"
          maxlength="6"
          placeholder="Enter OTP here"
          class="input-label"
        /> -->
      <!-- step="6"
          pattern="[0-9]{6}" -->
      <!-- </div> -->
      <button type="button" class="otp-button">Get OTP</button>
      <p class="resend-text">
        Didnâ€™t receive OTP?
        <button type="button" class="resend-button">Resend</button>
      </p>
    </div>
    <script>
      // addEventListener("beforeunload", (event) => {
      //   event.preventDefault();
      // });
      const otp_button = document.querySelector(".otp-button");
      const resend_text = document.querySelector(".resend-text");
      const matric_input = document.querySelector("#matric-input");
      const matric_box = document.querySelector(".input-box input");

      // <img class="input-img" src="./assets/teenyicons-otp-solid.png" />
      main_div = document.querySelector(".main-div");
      const otp_box = document.createElement("template");
      otp_box.innerHTML = `<div  class="input-box">
        <i class="fa-brands fa-keycdn fa-2xl otp-img"></i>
        <input
        id="otp-input"
        type="number"
          inputmode="numeric"
          oninput="javascript: if(this.value.length > this.maxLength) this.value = this.value.slice(0,this.maxLength);"
          maxlength="6"
          placeholder="Enter OTP here"
          class="input-label"
        />
      </div>`.trim();
      const feedback_message = document.createElement("p");
      feedback_message.classList.add("feedback-message");
      const get_otp = function () {
        if (matric_input.value == "") {
          feedback_message.textContent = `Invalid Matric Number`;
          main_div.insertBefore(feedback_message, otp_button);
          return;
        }

        feedback_message.textContent = "";
        otp_button.textContent = "Validate OTP";
        matric_input.disabled = true;
        otp_button.addEventListener("click", validate_otp);
        main_div.insertBefore(otp_box.content, otp_button);
        resend_text.style.opacity = "1";
      };

      const validate_otp = function () {
        const otp_input = document.querySelector("#otp-input");
        if (otp_input.value == "") {
          feedback_message.textContent = "Invalid Otp";
          main_div.insertBefore(feedback_message, otp_button);
          return;
        }

        // feedback_message.textContent = "";
        window.location.href = "./main-voting-link-default.html";
      };
      otp_button.addEventListener("click", get_otp);
    </script>
  </body>
</html>
